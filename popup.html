<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AskHistory</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div id="app">
    <!-- Main View -->
    <div id="main-view">
      <div class="header">
        <button id="bookmark-view-btn" class="header-btn" title="View Bookmarks">
            <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"/></svg>
        </button>
        <span id="askhistory-title" class="title">AskHistory</span>
        <div class="header-actions">
            <button id="specific-category-filter-btn" class="header-btn" title="Filter by Specific Category">
                <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
            </button>
        </div>
      </div>
      <div class="search-container">
        <div id="main-search-line" class="vertical-color-line"></div>
        <input type="text" id="search-input" placeholder="Search messages..." autocomplete="off" />
        <div id="category-filter-menu" class="context-menu" style="display: none;"></div>
      </div>
      <div id="message-list"></div>
      <div id="not-on-chatgpt" style="display:none;">
        <p class="not-on-chatgpt-text">Navigate to a supported chat page to begin.</p>
      </div>
    </div>

    <!-- Category Management View -->
    <div id="manage-view" style="display: none;">
        <div class="header">
            <h1>Manage Categories</h1>
            <button id="done-btn" class="header-btn" title="Done">Done</button>
        </div>
        <div class="manage-container">
            <p>Create custom categories with unique names and colors.</p>
            <div id="add-category-form">
                <input type="text" id="category-name-input" placeholder="Category Name (e.g., 'Important')" maxlength="20">
                <input type="color" id="category-color-input" value="#4A90E2">
                <button id="add-category-btn">Add</button>
            </div>
            <div id="suggested-categories-container">
                <h2>Suggestions</h2>
                <div id="suggested-categories-list">
                    <!-- Suggested categories will be dynamically inserted here -->
                </div>
            </div>
            <div id="categories-list-container">
                <h2>Your Categories</h2>
                <ul id="categories-list">
                    <!-- Categories will be dynamically inserted here -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Bookmark View -->
    <div id="bookmark-view" style="display: none;">
        <div class="header">
            <button id="bookmark-done-btn" class="header-btn" title="Back">
                <svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </button>
            <span class="title">Bookmarks</span>
            <div class="header-actions">
            <button id="bookmark-category-filter-btn" class="header-btn" title="Filter by Category">
                <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
            </button>
            </div>
        </div>
        <div class="search-container">
          <div id="bookmark-search-line" class="vertical-color-line"></div>
          <input type="text" id="bookmark-search-input" placeholder="Search bookmarks..." autocomplete="off" />
        </div>
        <div id="bookmark-category-filter-menu" class="context-menu" style="display: none;"></div>
        <div id="bookmarked-list">
            <!-- Bookmarked questions will be dynamically inserted here -->
        </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>